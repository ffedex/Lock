-- CODED BY ffedex

getgenv().Aimbot = {
    Status = true,
    Keybind = 'T',
    Hitpart = 'HumanoidRootPart',
    Prediction = {
        X = 0.165,
        Y = 0.1,
    },
}

if getgenv().AimbotRan then return end
getgenv().AimbotRan = true

local RunService = game:GetService('RunService')
local Players = game:GetService('Players')
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()
local TargetPlayer = nil

local function GetClosestPlayer()
    local closestDistance = math.huge
    local closestPlayer = nil

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild('HumanoidRootPart') then
            local rootPosition, visible = Camera:WorldToScreenPoint(player.Character.HumanoidRootPart.Position)
            if visible then
                local distance = (Vector2.new(Mouse.X, Mouse.Y) - Vector2.new(rootPosition.X, rootPosition.Y)).Magnitude
                if distance < closestDistance then
                    closestPlayer = player
                    closestDistance = distance
                end
            end
        end
    end

    return closestPlayer
end

Mouse.KeyDown:Connect(function(key)
    if key:lower() == Aimbot.Keybind:lower() then
        TargetPlayer = TargetPlayer and nil or GetClosestPlayer()
    end
end)

RunService.RenderStepped:Connect(function()
    if not TargetPlayer or not Aimbot.Status then return end

    local hitPart = TargetPlayer.Character:FindFirstChild(Aimbot.Hitpart)
    if hitPart then
        Camera.CFrame = CFrame.new(Camera.CFrame.Position, hitPart.Position + hitPart.Velocity * Vector3.new(Aimbot.Prediction.X, Aimbot.Prediction.Y, Aimbot.Prediction.X))
    end
end)
